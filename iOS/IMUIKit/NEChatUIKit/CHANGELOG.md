# NEChatUIKit Changelog

## 9.6.0(2023-07-05)
### New Features
* 新增娱乐版UI
* 消息长按功能项支持全局过滤、自定义配置
* ChatProvider 新增 sendForwardMessage 方法，用于发送生成的转发消息
* ChatRepo 新增 sendForwardMessage 方法，用于发送生成的转发消息
* ChatRepo 新增 makeForwardMessage(message:, session:) 方法，用于生成转发消息并转发
* String 新增 扩展方法 finalSize() 用于计算 UILabel 纯文本/富文本大小
* 标记列表监听标记消息是否监听页面动态变化
* 群成员超过200人不显示已读未读
* 兼容某些老机型位置授权会回调多次问题(首次拒绝，在设置授权页面操作多次，引用内收到多次授权成功，导致地理位置页面弹出多次)
* 好友修改群昵称或给好友添加备注后聊天页面已经存在的通知消息昵称同步更新

### Bug Fixes
* 播放语音消息过程接到音视频通话，语音消息未停止播放
* 多端登陆都在黑名单列表，其中一端添加/移除黑名单好友，另一端不同步
* 偶现点击标记列表页标记消息跳转到聊天页，标记消息位置展示不对
* 单聊设置页面添加好友创建讨论组，讨论组名称取了好友accid
* 修复底部功能区再次点击不能收起的问题
* 修复偶现媒体消息以文件消息形式发送

### Behavior changes
* 放开继承访问权限，提升消息详情页可自定义能力
* ChatRepo 废弃 makeForwardMessage(_ message:, _ session:) 方法，使用makeForwardMessage(message:, session:)方法代替
* 搜索群聊时，不再匹配群ID

## 9.5.0(2023-04-20)
### New Features
* 新增标记列表功能
* 替换聊天页面@解决方案
* 回复消息展示区域支持 emoji 表情替换
* 撤回/删除消息，回复区域文案统一为：该消息已移除，且实时刷新
* 新增 TextViewController 控制器，用于展示回复消息（文本）的内容
* NEEmotionTool 类新增 getAttWithStr(str:, font:, color:, _ offset:) 方法，用于设置替换表情后的文本的颜色
* extension String 新增 calculateMaxLines 方法，用于计算文本的实际行数
* 支持 svg 和 webp 图片格式

### Behavior changes
* 消息回复技术方案更新（不使用 thread 方案）
* 通过用户信息更新字典，在 cell 渲染的时候实现用户信息和群信息的更新
* 点击回复消息跳转逻辑更改，仅未下载/下载中的文件/视频跳转，其他消息类型则直接对消息进行展示
* 讨论组与高级群中的通知消息均不展示发送时间, 高级群创建成功展示创建时间
* 回复消息为视频、文件时，点击回复消息，若文件未下载/下载中，则开始下载并跳转至源消息，下载完成则直接打开
* 群聊二级及以上界面，收到解散群聊通知统一在回到聊天页面弹窗提示
* 群聊通知文案统一 & 展示优化，不再区分讨论组与群聊

### Bug Fixed
* 优化同时取消标记消息一端显示请求的对象不存在问题
* 优化地理位置详情页点击定位当前位置底部列表数据刷新过慢问题
*  修复多端登陆，双端都在同一个群聊聊天页面，A端给好友添加备注，B端查看好友昵称未变更的问题
*  修复接收超长文本消息展示过多空白区域的问题

## 9.4.0(2023-03-08)
### New Features
* 新增回复他人消息时输入框默认显示@消息发送人。
* 个人名片页新增生日栏。
* 文件消息限制可发送文件大小为200MB。
### Behavior changes
* 撤回可编辑时间从五分钟调整为两分钟。
* 失败重发消息重发cell移动到底部(原来逻辑是保留原来位置)。
* 群聊天详情页的本端显示，标记消息的文案改为：你标记了这条信息，所有群成员均可见。
* 聊天历史消息切换可信时间戳解决方案。
* 发送失败或者发送中的消息禁止长按操作。
* 删除创建讨论组接口，统一用创建高级群接口，并根据option参数区分，option 参数移到 TeamRouter 层。
### Bug Fixes
* 修复 转发群消息未点击确定按钮就触发转发事件Bug。
* 修复 语音消息长按失败导致的多个UI显示以及逻辑异常(例如长按录制语音的同时操作通知栏下拉等)。
* 修复长按更多操作框在有键盘弹出的逻辑下点击不生效。
* 修复滑动消息详情页面时，消息功能面板不会消失的问题。
* 修复输入框输入@符号，弹出人员选择器中未展示好友备注的问题。
* 修复聊天输入栏输入文本后，此时光标移动到已输入文本前@好友，@会跑到已输入的文本之后的问题。
* 修复被回复消息好友昵称显示不全，仅显示两个字符的问题。
* 修复限制字数的输入框输入连续输入长文字，会限制输入的问题。
* 修复本端和对端的消息功能面板都靠最左侧显示的问题。
* 修复聊天页面点击更多后，收到消息直接已读的问题。
* 修复群聊群主设置群禁言后，群成员输入栏下方功能区还能展开、还能发送的问题。
* 修复讨论组置顶-退出-重新被拉进讨论组后丢失置顶状态的问题。
* 修复p2p页面回复自己和别人都带上了 @符号、群聊/讨论组，回复自己的消息，也带上了 @符号的问题。
* 修复多端登陆自己发送的视频消息在其他端不显示首帧的问题。
* 修复讨论组和群聊的聊天框输入@，放弃选中艾特人，收回选择列表页后，@符号消失的问题。
* 修复消息转发弹窗UI与android端不一致的问题。
* 修复讨论组/群聊，无匹配历史记录时，文字提示与android不一致的问题。
* 修复聊天记录很少时长按消息弹窗弹出后点击屏幕下方弹窗不收起的问题。
* 修复群组@艾特人时，@列表没有过滤自己本人的问题。
* 修复 设置-已读未读 开关未生效的问题。

## 9.3.1(2023-1-05)
*   - FIXED    修复 NEMapKit 组件的已知问题。

## 9.3.0(2022-12-05)
*   - NEW    新增地理位置消息功能，具体实现方法参见实现地理位置消息功能。
*   - NEW    新增文件消息功能（升级后可直接使用）。
*   - FIXED    修复更新讨论组/高级群头像失败的问题。
*   - FIXED    修复发送视频消息未显示首帧的问题。
*   - FIXED    修复表情和文案不一致的问题。
*   - FIXED    修复“正在输入中”的显示问题。
*   - FIXED    修复群聊消息已读按钮失效的问题。
*   - FIXED    修复其他已知问题。

## 9.2.11(2022-11-17)
*   - UPDATE   NIM SDK 版本升级到 V9.6.4    
*   - FIXED    修复好友名片中未显示基本信息的问题。
*   - FIXED    修复视频消息加载问题。
*   - FIXED    修复更新自己群昵称失败的问题。
*   - FIXED    修复加入他人圈组服务器的按钮失效问题。
*   - FIXED    修复圈组频道成员列表和频道黑白名单成员列表的展示问题。
*   - FIXED    修复无法退出图片详情页的问题。
*   - FIXED    修复历史图片未展示缩略图的问题。
*   - FIXED    修复黑名单成员列表头像与好友头像不一致的问题。
*   - FIXED    修复其他已知问题。


## 9.2.10(02-November-2022)
*   - FIXED    修复xcode 14编译错误问题

## 9.2.9(25-August-2022)
*   - NEW      iOS新增自定义用户信息功能。
*   - changed  IMKitEngine类中功能迁移至IMKitClient
*   - FIXED    修复OC工程调用UI库失败问题
*   - FIXED    统一接口层API
*   - FIXED    修复已知bug

## 9.2.8(19-September-2022)
*   - NEW    多语言能力支持
*   - FIXED  相机权限修改
*   - FIXED  历史遗留bug修改

## 9.2.7(25-August-2022)
*   - FIXED  修复 Swift 版本编译问题。
*   - FIXED  修复相册选择图片时图片展示问题。
*   - FIXED  修复圈组频道身份组权限信息展示问题。

## 9.2.6-rc01(02-August-2022)
*   - FIXED  修复导航控制器push 页面 页面卡顿问题

## 9.2.6-rc01(02-August-2022)
*   - FIXED  修复导航控制器push 页面 页面卡顿问题
*   - FIXED  修改错误emoji表情问题。
*   - FIXED  统一log命名->NELog
*   - FIXED  好友名片页去掉消息提醒开关
*   - FIXED  修复app端修改群组头像 web端不能展示问题
*   - FIXED  统一podspec依赖，三方库不设置固定版本
*   - NEW    添加Conversationrepo chatrepo 注解
*   - NEW    新增userInfoProvider功能类

## 9.2.4(28-June-2022)
*   - FIXED  修复客户反馈chat页面，无消息时下拉崩溃，新建群组下拉消息重复。
*   - FIXED  router路由对齐，contact主页面设置open。
*   - FIXED  修改Toast提示信息位置
*   - NEW    补充自定义消息逻辑

## 9.2.1(20-July-2022)
    - FIXED  低版本xcode编译低版本的包（xcode 13.2.1）

## 9.0.2(29-May-2022)
*   - FIXED  修复NEConversationUIKit,NEChatUIKit,NETeamUIKit,NEQChatUIKit,NEContactUIKit中作用域问题。

## 9.0.1(19-May-2022)
*   - NEW  我的->个人信息页 新增copy账号功能
*   - FIXED 修复头像被压缩问题
*   - FIXED 发送视屏压缩模糊问题修复
*   - FIXED 修复搜索框背景色,高度问题，修复会话列表首页弹窗阴影过重问题，修复alert弹窗色值问题，修复通讯录icon失真问题...
*   - FIXED 更新会话列表logo&title
*   - FIXED 修复圈组聊天页键盘偶现不能弹起问题。
*   - FIXED 修复图片预览被压缩变形问题

## 9.0.0(09-May-2022)
*   - NEW  swift新版本IM发布,包含消息，圈组，通讯录，我的版块。
